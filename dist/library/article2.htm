<!DOCTYPE html><html lang="ru"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Библиотека &ndash; Святоха А.А. &ndash; Разработка обеспечения по контролю за действиями пользователей</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui"><meta name="author" content="Святоха Артём Александрович"><link rel="icon" type="image/png" href="../images/masters_i.png"><link rel="stylesheet" href="../css/main.css"></head><body><div class="header container-wrapper"><div class="container"><div class="topmenu clearfix"><div class="left"><a href="../index.htm#library" data-text="Назад в библеотеку" class="icon-link icon-link--no-icon"></a></div><div class="donntu-links right"><a href="http://donntu.org/" target="_blank" data-text="ДонНТУ" class="icon-link icon-link--donntu icon-link--grayscale"></a><a href="http://masters.donntu.org/" target="_blank" data-text="Портал магистров" class="icon-link icon-link--mportal icon-link--grayscale"></a></div><div class="nav-menu right"><div class="nav-button"><span></span></div><div class="nav-wrapper"><div class="nav-list"><a href="http://donntu.org/" target="_blank" data-text="ДонНТУ" class="icon-link icon-link--donntu icon-link--grayscale nav-link"></a><a href="http://masters.donntu.org/" target="_blank" data-text="Портал магистров" class="icon-link icon-link--mportal icon-link--grayscale nav-link"></a></div></div></div></div><div class="head library zx-border"></div></div></div><div class="content container-wrapper"><div class="container library"><h1>Разработка обеспечения по контролю за действиями пользователей</h1><p class="no-indent"><strong>Авторы:</strong> Святоха А.А.</p><h1>Введение</h1><p>Целью является создание программного обеспечения по контролю за действиями пользователей в системе бухгалтерского учета. Благодаря возможностям системы, администратор легко может выявлять критические изменения, внесенные пользователями повлекшие нестабильную работу сервера.</p><h2>Анализ систем логирования</h2><p>Естественной потребностью системного администратора или специалиста по безопасности является некий анализ того, что происходит как на конкретном компьютере конкретного пользователя, так и в локальной сети. Технически задача выполнима, ибо разработчики множества приложений, которыми мы пользуемся, заложили в свои продукты функцию логирования информации. Информация, которую хранят логи (файл с записями о событиях в хронологическом порядке, простейшее средство обеспечения журналирования) конкретного компьютера в сети, может сказать много тому, кто, с некоторым знанием предмета, рискнет заглянуть внутрь.</p><p>Для того чтобы грамотно добывать полезную информацию из логов, иногда достаточно простого текстового редактора, но часто встречаются ситуации, когда лог и просмотреть довольно сложно, и трактовать правильно тяжело. В этом случае может потребоватся дополнительное программное обеспечение для удобного представления информации, а также возможности поиска по заданным критериям.</p><h2>Обоснование выбора платформы</h2><p>В качестве системы администрирования используется Microsoft SQL Server 2008 (<a href="#img1">рис. 1</a>), и использует базу данных в качестве хранилища логов. В большинстве своем это отдельная таблица базы данных, каждая строка которой является отдельным событием. Такое логирование часто может отрицательно сказаться на общей производительности базы данных, так как логирование в базу данных может быть довольно интенсивным (к примеру, MS SQL Server 2000/2005 успевает в C2 Audit логи писать несколько десятков записей в секунду). Естественно, что все зависит от того, как сконфигурировано приложение. Впрочем, некоторые производители предупреждают о возможных проблемах вне зависимости от конфигурации, обычно это предупреждение является перестраховкой, так как всегда есть возможность подобрать конфигурацию системы аудита, которая будет не слишком обременительной.</p><p>Реализация системы логирования устроена посредством триггеров СУБД, которые срабатывают при изменении либо удалении записей в определённой таблице, и заносят старые значения в таблицу хранящую логи.</p><div class="img" id="img1"><img src="images/ms_sql.png" alt="MS SQL Server Management Studio 2008" class="img__image" title=""/><span class="img__caption">Рисунок 1 &ndash; MS SQL Server Management Studio 2008</span></div><p>Так как используется СУБД от Microsoft, хорошим решением будет реализация клиента для просмотра логов на платформе .NET на языке программирования C#. Основным преимуществами данного решения является то, что платформа .NET обеспечивает удобный интерфейс для подключения к СУБД, особенно к СУБД от Microsoft. Дополнительными преимущества – это простота разработки на основе использования парадигмы ООП, качественная интегрированная среда разработки MS Visual Studio, с возможностью визуального проектирования интерфейса взаимодействия с пользователем и широким функционалом. Основной минус в том, что данное решение не является кроссплатформенным – может применятся только на компьютерах с операционной системой Windows и требует установленного пакета .NET.</p><h2>Разработка программной модели</h2><p>Первое с чего необходимо начать разработку это реализация подключения к СУБД, для этого было разработано окно входа (<a href="#img2">рис. 2</a>) для указания параметров подключения.</p><div class="img" id="img2"><img src="images/login_db.png" alt="Окно подключения к СУБД" class="img__image" title=""/><span class="img__caption">Рисунок 2 &ndash; Окно подключения к СУБД</span></div><p>После заполнения форм и нажатия кнопки «Вход» вызывается метод Connect класса DB_Connection, который формирует строку с параметрами для подключения к СУБД:</p><code><pre>public class DB_Connection
    {
        private SqlConnection connection;

        public void Connect(
string server,
bool windowsAuth,
string user,
string password)
        {
            string connetionString = null;
            if (windowsAuth)
            {
                connetionString =
$"Server={server};Trusted_Connection=true;";
            }
            else
            {
                connetionString =
$"Data Source={server};User ID={user};Password={password};";
            }
            connection = new SqlConnection(connetionString);
            connection.Open();
        }
	
	public void SafeConnect(
string server,
bool windowsAuth,
string user, string
password)
        {
            if (connection == null) {
Connect(server, windowsAuth, user, password);
		 }
        }
/* … */
}
</pre></code><p>После чего мы попадаем в главное окно программы (рис. 3.3) в котором можно видеть две вкладки: одну с таблицей с логами, в которой поля в которых есть изменения отображены красным цветом и другую таблицу в которой находится текущее состояние полей. Ниже находятся формы для выбора критериев отображения результатов, после выбора всех критериев следует нажать кнопку «Применить фильтры», после чего будет сформирован SQL запрос, который выберет необходимые данные из таблицы логов, данный запрос отображается в нижней строке, вот его пример:</p><code>SELECT logs.*, users.cUser_Iden, users.cUser_FullName FROM GD_PERSON_log logs INNER JOIN GD_USER users ON logs.nId_User=users.nId_User WHERE logs.nId_User='6' AND logs.nId_Person='1' AND logs.DateOfChange>='2018.09.10' AND logs.DateOfChange<='2018.09.29'</code><div class="img"><img src="images/logger.png" alt="Главное окно программы" class="img__image" title=""/><span class="img__caption">Рисунок 3 &ndash; Главное окно программы</span></div><h2>Выводы</h2><p>Была разработана система логирования для администратора СУБД на базе Microsoft SQL Server. Благодаря возможностям системы, администратор легко может выявлять критические изменения, внесенные пользователями повлекшие нестабильную работу сервера.</p></div></div><div class="footer container-wrapper"><div class="container"><div class="footer__counter"><!-- BEGIN OF PING CODE v5.1--><script language="javascript">//<!--
id="112802155341";img="count30";script="http://counter.topping.com.ua:80/cgi-bin/pinger.cgi";d=document;an=navigator.appName;rf=escape(d.referrer);w="";c="";jv="0";je="u";//--></script><script language="javascript1.1">//<!--
jv="1";je = (navigator.javaEnabled()?"y":"n");//--></script><script language="javascript1.2">//<!--
s=screen;w=s.width;an!="Netscape"?c=s.colorDepth:c=s.pixelDepth;jv="2";//--></script><script language="javascript1.3">//<!--
jv="3";//--></script><script language="javascript">//<!--
pi="";pi+="\""+script+"?id="+id+"&img="+img+"&w="+w+"&c="+c+"&ref="+rf+"&jsv="+jv+"&jen="+je+"\"";pi="<a href=http://www.topping.com.ua/ target=_blank><img src="+pi+" width=88 height=31 border=0 alt=\"Rated by PING\"></a>";d.write(pi);//--></script><noscript><a href="http://www.topping.com.ua/rating/donetsk/" target="_blank"><img src="http://counter.topping.com.ua:80/cgi-bin/ping.cgi?112802155341;count30" alt="Rated by PING" width="88" height="31" border="0"></a></noscript><!-- END OF PING CODE v5.1--></div><div class="footer__counter"><!-- Rating@Mail.ru counter--><script language="javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer);js=10;//--></script><script language="javascript1.1"><!--
a+=';j='+navigator.javaEnabled();js=11;//--></script><script language="javascript1.2"><!--
s=screen;a+=';s='+s.width+'*'+s.height;
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth);js=12;//--></script><script language="javascript1.3"><!--
js=13;//--></script><script language="javascript" type="text/javascript"><!--
d.write('<a href="http://top.mail.ru/jump?from=407990" target="_top">'+
'<img src="http://d9.c3.b6.a0.top.mail.ru/counter?id=407990;t=56;js='+js+
a+';rand='+Math.random()+'" alt="Рейтинг@Mail.ru" border="0" '+
'height="31" width="88"></a>');if(11<js)d.write('<'+'!-- ');//--></script><noscript><a target="_top" href="http://top.mail.ru/jump?from=407990"><img src="http://d9.c3.b6.a0.top.mail.ru/counter?js=na;id=407990;t=56" alt="Рейтинг@Mail.ru" width="88" height="31" border="0"></a></noscript><script language="javascript" type="text/javascript"><!--
if(11<js)d.write('--'+'>');//--></script><!-- // Rating@Mail.ru counter--></div><div class="footer__counter"><!-- bigmir)net TOP 100--><a href="http://top.bigmir.net/show/science/" target="_blank"><script language="javascript"><!--
bmQ='<img src=http://c.bigmir.net/?s38404&t5'
bmD=document
bmD.cookie="b=b"
if(bmD.cookie)bmQ+='&c1'
//--></script><script language="javascript1.2"><!--
bmS=screen;bmQ+='&d'+(bmS.colorDepth?bmS.colorDepth:bmS.pixelDepth)+"&r"+bmS.width;
//--></script><script language="javascript"><!--
bmF = bmD.referrer.slice(7);
((bmI=bmF.indexOf('/'))!=-1)?(bmF=bmF.substring(0,bmI)):(bmI=bmF.length);
if(bmF!=window.location.href.substring(7,7+bmI))bmQ+='&f'+escape(bmD.referrer);
bmD.write(bmQ+" border=0 width=88 height=31 alt='bigmir TOP100'>");
//--></script></a></div><div class="footer__counter"><!-- Openstat--><span id="openstat2124156"></span><script type="text/javascript">var openstat = { counter: 2124156, image: 5045, next: openstat }; document.write(unescape("%3Cscript%20src=%22http" +
(("https:" == document.location.protocol) ? "s" : "") +
"://openstat.net/cnt.js%22%20defer=%22defer%22%3E%3C/script%3E"));</script><!-- /Openstat--><!-- LiveInternet counter--><script type="text/javascript"><!--
document.write("<a href='//www.liveinternet.ru/click' "+
"target=_blank><img src='//counter.yadro.ru/hit?t44.6;r"+
escape(document.referrer)+((typeof(screen)=="undefined")?"":
";s"+screen.width+"*"+screen.height+"*"+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+";u"+escape(document.URL)+
";"+Math.random()+
"' alt='' title='LiveInternet' "+
"border='0' width='1' height='1'></a>")
//-->
// /LiveInternet</script></div></div></div><script src="https://code.jquery.com/jquery-3.3.1.min.js"></script><script src="../js/main.js"></script></body></html>